{% extends "base.html" %}

{% block content %}
<section class="pt-14">
  {% include "header.html" %}

  {% if error %}
  <div class="flex justify-center my-4 text-2xl">
    <span class="p-4 rounded shadow bg-red-400 dark:bg-red-800">
      🤯 Sorry something went wrong, please wait a moment and try again 🤯
    </span>
  </div>
  {% else if streams.is_empty() %}
  <div class="flex justify-center my-4 text-2xl">
    <span class="p-4 rounded shadow bg-zinc-200 dark:bg-zinc-800">
      😭 Nobody streaming
      {% for word in query_words -%}
      {%- if query_words.len() > 1 && loop.index0 > 0 -%}
        {%- if loop.last -%}&nbsp;or&nbsp;{%- else -%},&nbsp;{% endif -%}
      {%- endif -%}
      <strong>{{ word }}</strong>
      {%- endfor %}
      right now 😭
    </span>
  </div>
  {% else %}
  <div class="grid grid-cols-1 gap-6 py-6 md:grid-cols-2 lg:grid-cols-3">
    {% for stream in streams %}
    <div class="rounded shadow bg-zinc-200 dark:bg-zinc-800">
      <img class="w-full rounded-t aspect-auto" src="{{ self::sized(stream.thumbnail_url, 640, 360) }}">
      <div class="p-4">
        <a class="text-lg leading-tight" href="https://twitch.tv/{{ stream.user_name }}">{{ stream.title }}</a>
        <p class="text-sm">@{{ stream.user_name }}</p>
        <div class="pt-6">
          <p>
            🎤 Speaking <span class="font-bold">{{ crate::lang::translate_iso_639_1(stream.language) }}</span>
          </p>
          <p>
            ⏱️ Streaming for <span class="font-bold">{{ self::since_now(stream.started_at) }}</span>
          </p>
          <p>
            👀 With <span class="font-bold">{{ stream.viewer_count }} viewers</span>
          </p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% endif %}

  {% include "credits.html" %}
</section>
{% endblock content %}