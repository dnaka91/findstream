{% extends "base.html" %}

{% block content %}
<section class="section">
  <div class="container">

    {% include "header.html" %}

    {% if responses.is_empty() %}
    <div class="columns">
      <div class="column has-text-centered">
        <div class="box">
          <span class="is-size-4">😭 Nobody streaming <strong>{{ query }}</strong> right now 😭</span>
        </div>
      </div>
    </div>
    {% else %}
    <div class="tile is-ancestor">
      {% for resp in responses %}
      <div class="tile is-parent">
        <div class="tile is-child card">
          <div class="card-image">
            <figure class="image is-16by9">
              <img src="{{ self::sized(resp.thumbnail_url, 640, 360) }}">
            </figure>
          </div>
          <div class="card-content">
            <p class="title is-4">
              <a href="https://twitch.tv/{{ resp.user_name }}">{{ resp.title }}</a>
            </p>
            <p class="subtitle is-6">@{{ resp.user_name }}</p>
            <div class="content">
              <div>
                <span class="icon">🎤</span>
                <span>Speaking <strong>{{ resp.language }}</strong></span>
              </div>
              <div>
                <span class="icon">⏱️</span>
                <span>Streaming for <strong>{{ self::since_now(resp.started_at) }}</strong></span>
              </div>
              <div>
                <span class="icon">👀</span>
                <span>With <strong>{{ resp.viewer_count }} viewers</strong></span>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% if loop.index % 3 == 0 %}
      </div>
      <div class="tile is-ancestor">
      {% endif %}
      {% if loop.last && loop.index % 3 > 0 %}
      {% for _ in loop.index % 3..3 %}
      <div class="tile is-parent">
        <div class="tile is-child"></div>
      </div>
      {% endfor %}
      {% endif %}
      {% endfor %}
    </div>
    {% endif %}

    <div class="columns mt-6">
      <div class="column">
        {% include "credits.html" %}
      </div>
    </div>

  </div>
</section>
{% endblock content %}